# DHCPv4 Packet Structure (Core Fields)

```text
################################################################################
                          DHCPv4 Packet Structure
################################################################################

┌───────────────┬───────────────┬───────────────┬────────────────┐
│      Op       │     HType     │     HLen      │      Hops      │
│    (1 byte)   │   (1 byte)    │   (1 byte)    │    (1 byte)    │
└───────────────┴───────────────┴───────────────┴────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                             Transaction ID (4 bytes)                         │
└──────────────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────┬──────────────────────────────────────────────┐
│        Seconds Elapsed        │                    Flags                     │
│          (2 bytes)            │                  (2 bytes)                   │
└───────────────────────────────┴──────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                         Client IP Address – ciaddr (4 bytes)                 │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                         Your IP Address – yiaddr (4 bytes)                   │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                          Server IP Address – siaddr (4 bytes)                │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                         Gateway IP Address – giaddr (4 bytes)                │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                     Client Hardware Address – chaddr (16 bytes)              │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                     Server Host Name – sname (64 bytes, optional)            │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                     Boot File Name – file (128 bytes, optional)              │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                              Options (variable)                              │
└──────────────────────────────────────────────────────────────────────────────┘


Op (1 byte)
 : 메시지 방향 구분
   - 1 → BOOTREQUEST (Client → Server)
   - 2 → BOOTREPLY   (Server → Client)

HType – Hardware Type (1 byte)
 : 네트워크 인터페이스 타입
   예시 → 1 (Ethernet)

HLen – Hardware Address Length (1 byte)
 : MAC 주소 길이
   예시 → 6

Hops (1 byte)
 : DHCP Relay Agent 중계 횟수
   예시 → 0

Transaction ID – XID (4 bytes)
 : 요청–응답 매칭용 랜덤 식별자
   예시 → 0x3903F326

Seconds Elapsed (2 bytes)
 : DHCP Discover 시작 이후 경과 시간
   예시 → 0x0005

Flags (2 bytes)
 : 브로드캐스트 여부 등 제어 비트
   예시 → 0x8000 (Broadcast 플래그 ON)

Client IP Address – ciaddr (4 bytes)
 : 이미 보유한 IP 주소 (Renew 시 사용)
   예시 → 0.0.0.0

Your IP Address – yiaddr (4 bytes)
 : 서버가 할당하는 클라이언트 IP
   예시 → 192.168.10.100

Server IP Address – siaddr (4 bytes)
 : DHCP 서버 주소
   예시 → 192.168.10.1

Gateway IP Address – giaddr (4 bytes)
 : DHCP Relay Agent 주소
   예시 → 0.0.0.0

Client Hardware Address – chaddr (16 bytes)
 : 클라이언트 MAC 주소 필드
   - 최초 6 bytes → MAC
   - 나머지 → 0 padding
   예시 → 08:00:27:12:34:56

Server Host Name – sname (64 bytes)
 : 서버 호스트명 (옵션 필드)
   예시 → "" (미사용)

Boot File Name – file (128 bytes)
 : 네트워크 부팅 파일명 (PXE 등)
   예시 → pxelinux.0

Options (variable)
 : DHCP 제어 핵심 메타정보 포함

   주요 옵션
   - Option 53 → DHCP Message Type
     · 1 = Discover
     · 2 = Offer
     · 3 = Request
     · 4 = Decline
     · 5 = ACK
     · 6 = NAK
     · 7 = Release
     · 8 = Inform

   - Option 50 → Requested IP
   - Option 54 → DHCP Server Identifier
   - Option 51 → Lease Time
   - Option 1  → Subnet Mask
   - Option 3  → Router (Default Gateway)
   - Option 6  → DNS Server
